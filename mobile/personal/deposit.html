<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>T7传统</title>
    <link rel="shortcut icon" type="image/x-icon" href="../../../t7m/resource/img/peopleagent/favicon.ico">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" href="../../../t7m/resource/css/bootstrap.min.css">
    <link rel="styleSheet" href="../../../t7m/resource/css/peopleagent/style.css">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/wonder.css" class="wonder-core">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/blue-style.css" class="wonder-style">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/red-style.css" class="wonder-style">
    <script type="text/javascript" src="../../../t7m/resource/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/popper.min.js"></script>
    <script defer="" type="text/javascript" src="../../../t7m/resource/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/assets/layer/js/layer.js"></script>
    <link rel="stylesheet" href="http://210.244.18.147/t7m/resource/assets/layer/js/theme/default/layer.css?v=3.1.1" id="layuicss-layer">

    <script type="text/javascript">
        function iosViewEvent() {
            document.documentElement.addEventListener('touchstart', function(event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            }, false);

            var lastTouchEnd = 0;
            document.documentElement.addEventListener('touchend', function(event) {
                var now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
        }

        window.onload = function() {
            setTimeout(function() {
                window.scrollTo(0, 1);
            }, 100);

            iosViewEvent();
        }
    </script>
    <style>
        .tkgz_list_web p label {
            -webkit-user-select: all;
            -moz-user-select: all;
            -ms-user-select: all;
            user-select: all;
        }
        
        .tkgz_list_web p button {
            line-height: 1.5rem;
        }
    </style>
</head>

<body>
    <div class="wrap" id="container">
        <header class="">
            <div class="go-back-wrap">
                <a class="go-back" href="javascript:void(0);" onclick="history.go(-1)">
                    <i class="fas fa-chevron-left" style="margin-right: 3px;"></i>
                    返回
                </a>
            </div>
            <div class="info-wrap">
                <div>
                    <span class="title">充值</span>
                </div>
            </div>
            <div>
                <a class="btn-list" onclick="openElement('#sidebar');">
                    <i class="fas fa-bars"></i>
                </a>
            </div>
        </header>
        <input id="contextPath" type="hidden" value="/t7m">
        <div class="lds-ring" style="display: none;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <script>
            gameCode = '';
            contextPath = $('#contextPath').val();
            $(function() {
                //   setStyleFromCookie();
                callHeaderTouch();
                /*if ("true" !== "false") {
                  intervalBalance();
                }*/
            });

            function callHeaderTouch() {
                headerTouch();
            }

            function headerTouch() {
                $('.account-box').on('touchstart', function() {
                    $(this).css('background', 'rgb(19, 63, 142)');
                });

                $('.account-box').on('touchend', function() {
                    $(this).removeAttr("style");
                });
            }

            function intervalBalance() {
                var balanceIvl = setInterval(function() {
                    if ("true" !== "true") {
                        clearInterval(balanceIvl);
                    }
                    getJsonData(document.getElementById("contextPath").value + '/Member/GetBalance', null, changeBalance);
                }, 60000)
            }

            function changeBalance(response) {
                $('header .coin').html('<i class="icon-coin"/>' + getCurrency(response) + '元');
            }

            function changeAfterBetBalance(response) {
                $('.balance-bar .coin').html(getCurrency(response));
            }
        </script>
        <div class="mainer">
            <form id="deposit" action="/t7m/mobile/personal/deposit" method="post" enctype="utf8" novalidate="novalidate">
                <input type="hidden" class="required valid" name="type" value="1">
                <div class="page_zfbcz">
                    <div class="menu_tab" style="">
                        <div class="d-flex flex-wrap text-center" id="menu">
                            <div class="col-6 p-0">
                                <div class="deposit-chip" onclick="showDeposit(1)">
                                    <i class="icon-payment icon-payment0"></i>
                                    <span>银行卡转账</span>
                                </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="deposit-chip" onclick="showDeposit(2, 4)">
                                    <i class="icon-payment icon-payment4"></i>
                                    <span>支付宝</span>
                                </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="deposit-chip" onclick="showDeposit(2, 512)">
                                    <i class="icon-payment icon-payment512"></i>
                                    <span>快捷支付</span>
                                </div>
                            </div>
                            <div class="col-6 p-0">
                                <div class="deposit-chip" onclick="showDeposit(2, 1024)">
                                    <i class="icon-payment icon-payment1024"></i>
                                    <span>支付宝H5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tkgz_tab" id="payment1" style="display: none;">
                        <div class="payment-title text-center p-3">银行卡转账</div>
                        <div class="tkgz_list p-2">
                            <span>银行卡</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_sel">
                                    <span id="noAccountMessage" style="color:red; display:none;">没有可用的入款银行卡</span>
                                    <select class="required valid" name="payment" id="bank">
                                        <option value="5">中国银行</option>
                                    </select>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>金额限制</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <em>最低：<label id="min">10</label></em>
                                    <em>最高：<label id="max">50000</label></em>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>充值金额</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input name="amount" type="number" min="10" max="50000" placeholder="输入充值金额" required="">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="tkgz_tab" id="payment2" style="display: none;">
                        <input type="hidden" class="required valid" name="payment" disabled="">
                        <div class="payment-title text-center p-3"></div>
                        <div class="tkgz_list p-2">
                            <span>入款方式</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_sel">
                                    <select class="required valid" id="third"></select>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2" style="border-top: 0px; display: none;" id="ebanks">
                            <span>选择银行</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_sel">
                                    <select class="required valid"></select>
                                </div>
                            </div>
                            <input name="tppDtId" type="hidden" value="0">
                            <input name="bankId" type="hidden" value="0">
                            <input name="bankCode" type="hidden" value="0">
                            <input name="accType" type="hidden" value="0">
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>金额限制</span>
                            <div class="tkgz_list_web">
                                <p><em>最低：<label id="min"></label></em></p>
                                <p><em>最高：<label id="max"></label></em></p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>充值金额</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input name="amount" type="number" min="" max="" placeholder="输入充值金额" required="" disabled="">
                                </div>
                            </div>
                            <div class="clear"></div>
                            <div class="qsAmount"></div>
                        </div>
                    </div>
                    <div class="tkgz_tab" id="payment3" style="display: none;">
                        <input type="hidden" class="required valid" name="payment" disabled="">
                        <div class="payment-title text-center p-3"></div>
                        <div class="tkgz_list p-2 hidden">
                            <span>入款方式</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_sel">
                                    <img alt="qrCode" id="qrCode" src="//:0" style="width: 100%;">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>金额限制</span>
                            <div class="tkgz_list_web">
                                <p><em>最低：<label id="min"></label></em></p>
                                <p><em>最高：<label id="max"></label></em></p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>充值金额</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input name="amount" type="number" min="" max="" required="" disabled="">
                                </div>
                            </div>
                            <div class="clear"></div>
                            <div class="qsAmount"></div>
                        </div>
                    </div>
                    <div class="tip mx-4 my-3 p-2" style="display: none;">
                        <div class="tit"><span>注意事项：</span></div>
                        <div class="text">
                            <p></p>
                        </div>
                    </div>
                    <div class="row">
                        <button type="button" class="btn-submit1 my-2 w-75" onclick="submitDeposit()" style="display: none;">提交</button>
                    </div>
                </div>
            </form>
        </div>
        <div id="sidebar">
            <div class="header">
                <div class="mb-2 show-user flex-column">
                    <img class="rounded-circle" src="../../../t7m/resource/img/peopleagent/icon-user.jpg">
                    <span>test23</span>
                </div>
                <div class="show-coin">余额：<span class="points">28,901.445</span>元</div>
                <div class="justify-content-between">
                    <button type="button" class="btn-icon charge-button" onclick="goDeposit();"></button>
                    <button type="button" class="btn-icon withdraw-button" onclick="goWithdraw();"></button>
                </div>
                <div class="justify-content-center">
                    <a class="d-inline-block transfer-button" href="javascript:void(0);" onclick="goTransfer();"></a>
                </div>
            </div>
            <div class="list-menu-wrap" style="height:577.344px;">
                <ul class="list-menu">
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-account"></i>
                            <span>帐户中心</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/changeLoginPassword">修改密码</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/changeWithdrawPassword">提款密码</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/bankCardManagement">银行卡管理</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/myReward">个人总览</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-funds"></i>
                            <span>资金管理</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/deposit">充值</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/withdraw">提款</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/transfer">钱包转换</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/dwRecord">充提记录</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/acRecord">帐变记录</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/tRecord">转账记录</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-game-record"></i>
                            <span>游戏记录</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/order_list">个人投注</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/gameWater">游戏流水</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-agent-center"></i>
                            <span>代理中心</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/agentMember">团队管理</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/teamReport">团队报表</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/teamReward">团队总览</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goRule();">
                            <i class="icon icon-game-rule"></i>
                            <span>彩票规则</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goPromotion();">
                            <i class="icon icon-promotion"></i>
                            <span>优惠活动</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goCustomerService();">
                            <i class="icon icon-customer-service"></i>
                            <span>客服</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goLogout();">
                            <i class="icon icon-exit"></i>
                            <span>登出</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="d-flex justify-content-around footer">
                <div class="d-flex align-items-center">
                    <i class="d-inline-block s-icon icon-copyright mr-1"></i>
                    <span>版本号：V1.0</span>
                </div>
                <div class="d-flex align-items-center" onclick="clearCache();">
                    <i class="d-inline-block s-icon icon-clean mr-1"></i>
                    <span>清除缓存</span>
                </div>
            </div>
        </div>
        <a class="sidebar-mask" onclick="closeElement('#sidebar')"></a>
        <!-- message -->
        <div class="mask" style="display: none;">
            <div class="message_container flex-column">
                <div class="message-header text-center">
                    <span class="mt-2">讯息中心</span>
                    <div class="close_icon">
                        <a id="icon_close" href="javascript:void(0);"></a>
                    </div>
                </div>
                <div class="aside item_2">
                    <div class="message_wrap"></div>
                </div>
            </div>
        </div>
        <script>
            $(function() {
                resizeSidebar();
                messageEvent();

                $('ul.list-menu ul li').click(function() {
                    location.href = $(this).find('a').first().attr('href');
                    return false;
                });
            });

            function resizeSidebar() {
                var h = $('#sidebar').outerHeight() - ($('#sidebar .header').outerHeight() + $('#sidebar .footer').outerHeight() + 5);
                $('#sidebar .list-menu-wrap').attr('style', 'height:' + h + 'px;');
            }

            function messageEvent() {
                if ("true" === "true") {
                    getMessageCount();
                }
                openMessageBind();
                closeMessageBind();
            }

            function getMessageCount() {
                getJsonData("/t7m/Member/GetUserMessage", null, setMessageCount);
            }

            function getMessage() {
                getJsonData("/t7m/Member/GetUserMessage", null, setMessage);
            }

            function setMessageCount(response) {
                var count = 0;
                if (response.data) {
                    $.each(response.data, function(entryIdx, entry) {
                        if (entry['msgStatus'] == 1) count++;
                    });
                }
                $('#message_count').text(count);
            }

            function setMessage(response) {
                $('.message_wrap').empty();
                var count = 0;
                var title = '';
                var conternt = '尚無訊息';
                var msgTime = '';
                if (response.data) {
                    $.each(response.data, function(entryIdx, entry) {
                        title = entry['msgTitle'];
                        conternt = entry['msgContent'];
                        msgTime = entry['msgTime'];
                        var target = $('<div />', {
                                'class': 'outside'
                            })
                            .append($('<div />', {
                                    'class': 'message_list'
                                })
                                .append($('<div />', {
                                    'class': 'message_title text-truncate'
                                }).text(title))
                                .append($('<div />', {
                                    'class': 'message_content'
                                }).text(conternt))
                                .append($('<div />', {
                                    'class': 'message_date sub-title'
                                }).text(msgTime)));
                        if (entry['msgStatus'] == 1) {
                            target.append($('<div />', {
                                    'class': 'message_status'
                                })
                                .append($('<a />', {
                                    'class': 'unread',
                                    'href': '#',
                                    'onClick': 'readMessage(' + entry['msgID'] + ', this)'
                                }).text('标示为已读')));
                            count++;
                        } else {
                            target.find('.message_list').append($('<div />', {
                                'class': 'golgol'
                            }));
                        }
                        target.appendTo('.message_wrap');
                    });
                    $('#message_count').text(count);
                } else {
                    $('.message_count_wrap').remove();
                }
                $('.mask').show();
            }

            function readMessage(id, a) {
                a.classList.add("marked");

                var map = new Object();
                map['msgId'] = id;
                getJsonData("/t7m/Member/UpdateUserMessage", map, updateMessageStatus);
            }

            function updateMessageStatus() {
                var mark = document.getElementsByClassName("marked");
                for (var i = 0; i < mark.length; i++) {
                    $(mark[i]).parents('.outside').find('.message_list').append($('<div />', {
                        'class': 'golgol'
                    }));
                    mark[i].innerHTML = '';
                    mark[i].classList.remove("unread");
                    mark[i].classList.remove("marked");
                }
                $('#message_count').html(document.getElementsByClassName("unread").length);
            }

            function openMessageBind() {
                $('.trigger_message').click(function() {
                    if ("true" === "true") {
                        getMessage();
                    } else {
                        layer.open({
                            title: '警告',
                            content: '请先登录',
                            icon: 0,
                            btnAlign: 'c',
                            yes: function(index, layero) {
                                goSignIn(index);
                            }
                        });
                    }
                });
            }

            function closeMessageBind() {
                $('#icon_close').click(function() {
                    $('.mask').hide();
                    $('.member_menu').removeClass('member_menu_reduce');
                });
            }

            function refreshPoint() {
                if ("true" === "true") {
                    getJsonData("/t7m/Member/RefreshUserWallets", null, function(response) {
                        if (response.result) {
                            var w = response.data.find(function(item, index, array) {
                                return item.walletID == 0;
                            });
                            $('.points').html(getCurrency(w.balance));
                        } else {
                            showErrorResult(response.message);
                        }
                    }, null, true);
                }
            }
        </script>
        <script type="text/javascript" src="../../../t7m/resource/assets/socket.io-client/socket.io.slim.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/moment-with-locales.min.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/swiper.min.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/peopleagent/custom.js" data-url="https://x20.d7601.com"></script>

        <ul class="bottom-menu">
                <li class="active"><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-hall"></i><span>首页</span></a></li>
                <li class=""><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-lottery"></i><span>彩票</span></a></li>
                <li><a class="btn-icon" href="javascript:void(0);" onclick="goPromotion();"><i
              class="icon icon-promotion"></i><span>优惠</span></a></li>
                <li class=""><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-mine"></i><span>我的</span></a></li>
            <!-- <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goHall();">
                    <i class="icon icon-hall"></i>
                    <span>大厅</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goCustomerService();">
                    <i class="icon icon-customer-service"></i>
                    <span>客服</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goCenter();">
                    <i class="icon icon-manage"></i>
                    <span>管理中心</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goLotteryRecord();">
                    <i class="icon icon-nav-game-result"></i>
                    <span>开奖结果</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon " href="javascript:void(0);" onclick="goPromotion();">
                    <i class="icon icon-nav-promotion"></i>
                    <span>活动</span>
                </a>
            </li> -->
        </ul>

        <script>
            $(function() {
                wsClient();
                callFooterTouch();
            });

            function wsClient() {
                initialWS();

                var interval = setInterval(function() {
                    if (ws.connected) {
                        clearInterval(interval);
                        if ("true" === "true") {
                            joinWS('23', 'test23', '0y6qr733adcf5fb444000a83b1c989901a70a0y6qr');
                        } else {
                            joinWS('23');
                        }
                    }
                }, 1000);
            }

            function callFooterTouch() {
                footerTouch();
            }

            function footerTouch() {
                $('.bottom-menu li').on('touchstart', function() {
                    $(this).css('background', 'rgba(78, 78, 76, 0.7)');
                    $(this).addClass('active').siblings().removeClass('active');
                });

                $('.bottom-menu li').on('touchend', function() {
                    $(this).removeAttr("style");
                });
            }
        </script>
    </div>

    <script type="text/javascript" src="../../../t7m/resource/js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/messages_zh.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script>
        var depositMap = {},
            thirdMap = {},
            thirdBank = [],
            params = {};
        var banks = [];
        var newPage = null;

        function showMenu() {
            $('div[id^=payment]').hide();
            $('.btn-submit1').hide();
            $('.tip').hide();
            $('.menu_tab').show();
            $('.go-back').attr('onclick', 'history.go(-1)');
        }

        function showDeposit(type, tpp) {
            $self = $(event.target);
            $('.menu_tab').hide();
            updateForm(type, tpp, $self.parents("div.col-6").find("span").html());
            $('#payment' + type).show();
            $('.btn-submit1').show();
            $('.tip').show();
            $('input[name=type]').val(type);
            $('.go-back').attr('onclick', 'showMenu()');
        }

        function showDepositInfo(v, data) {
            if (Object.keys(data).length === 0) {
                alert("\u5145\u503C\u5931\u8D25\uFF0C\u8BF7\u8054\u7EDC\u5BA2\u670D");
                return;
            }

            var d = data.data;
            if ($('input[name=type]').val() == 3) {
                var qr = $("#qrCode").clone();
                $('.page_zfbcz').empty();
                $('.page_zfbcz').append($('<div />', {
                    'class': 'tkgz_list text-center'
                }).append(qr));
            } else {
                $('.page_zfbcz').empty();
                if (d.url) {
                    $('<iframe />', {
                        'src': d.url,
                        'width': '100%',
                        'height': '600px'
                    }).appendTo($(".page_zfbcz"));
                } else {
                    $('<div />', {
                            'class': 'tkgz_tab d-flex flex-column'
                        })
                        .append($('<div />', {
                            'class': 'tkgz_list px-1 py-2'
                        }).append($('<span />').html('充值金额')).append($('<div />', {
                            'class': 'tkgz_list_web'
                        }).append($('<p />').append(v))))
                        .append($('<div />', {
                            'class': 'tkgz_list px-1 py-2'
                        }).append($('<span />').html('入款银行')).append($('<div />', {
                            'class': 'tkgz_list_web'
                        }).append($('<p />').append($('<label />', {
                            'id': 'copy-1'
                        }).html(d.bankName)).append($('<button />', {
                            'type': 'button',
                            'class': 'copy',
                            'data-clipboard-target': '#copy-1'
                        }).html('复制')))))
                        .append($('<div />', {
                            'class': 'tkgz_list px-1 py-2'
                        }).append($('<span />').html('入款人姓名')).append($('<div />', {
                            'class': 'tkgz_list_web'
                        }).append($('<p />').append($('<label />', {
                            'id': 'copy-2'
                        }).html(d.accName)).append($('<button />', {
                            'type': 'button',
                            'class': 'copy',
                            'data-clipboard-target': '#copy-2'
                        }).html('复制')))))
                        .append($('<div />', {
                            'class': 'tkgz_list px-1 py-2'
                        }).append($('<span />').html('入款帐号')).append($('<div />', {
                            'class': 'tkgz_list_web'
                        }).append($('<p />').append($('<label />', {
                            'id': 'copy-3'
                        }).html(d.accID)).append($('<button />', {
                            'type': 'button',
                            'class': 'copy',
                            'data-clipboard-target': '#copy-3'
                        }).html('复制')))))
                        .append($('<div />', {
                            'class': 'tkgz_list px-1 py-2'
                        }).append($('<span />').html('开户行')).append($('<div />', {
                            'class': 'tkgz_list_web'
                        }).append($('<p />').append($('<label />', {
                            'id': 'copy-4'
                        }).html(d.accBank)).append($('<button />', {
                            'type': 'button',
                            'class': 'copy',
                            'data-clipboard-target': '#copy-4'
                        }).html('复制')))))
                        .appendTo($(".page_zfbcz"));
                    $('.page_zfbcz').append($($('<div />', {
                        'class': 'page_data_btn'
                    }).append($('<a />', {
                        'href': 'javascript:void(0)',
                        'onclick': 'refresh()'
                    }).html('确&nbsp;认'))));
                }
            }
        }

        function checkResult(data) {
            if (data.result) {
                showDepositInfo($('#deposit input[name=amount]').val(), data);
            } else {
                if (data.message == '帐号操作逾时') showWaringResult(data.message, goHall);
                else showErrorResult(data.message);
            }
        }

        function submitDeposit() {
            $("#deposit").submit();
        }

        function updateDepositTips(key) {
            $('div.tip div.text p').empty();
            Object.keys(params).forEach(function(element, index) {
                if (element == key) {
                    $('div.tip div.text p').append(params[element].paramValue_CN);
                }
            });
        }

        function updateForm(t, p, n) {
            $('select[name=payment], input[name=payment]').prop('disabled', true);
            $('#payment' + t + ' select[name=payment], #payment' + t + ' input[name=payment]').prop('disabled', false);

            $('label#amount-error').remove();

            $('div[id^=payment] input[name=amount]').val('');
            $('div[id^=payment] input[name=amount]').prop('disabled', true);
            $('#payment' + t + ' input[name=amount]').prop('disabled', false);

            $('#payment' + t + ' .payment-title').html(n);
            switch (t) {
                case 1:
                    updateDepositTips(14);
                    break;
                case 2:
                    $('#payment' + t + ' input[name=payment]').val(p);
                    updateDepositTips(16);
                    getThirdDepositList(p);
                    if (p == 256) {
                        $('#ebanks').show();
                    } else {
                        $('#ebanks').hide();
                    }
                    break;
                case 3:
                    updateDepositTips(15);
                    getMemberQrCodePayInfo(p);
                    break;
            }
        }

        function getBankList() {
            getJsonData("/t7m/Member/banks", null, function(response) {
                JSON.parse(response.data).forEach(function(element, index) {
                    banks.push(element);
                    $("select#bank").append($("<option />", {
                        'value': element.bankID
                    }).html(element.bankName));
                    if (index == 0) {
                        $('div#payment1 label#min').html(element.minTransAmt);
                        $('div#payment1 label#max').html(element.maxTransAmt);
                        $('div#payment1 input[name=amount]').attr({
                            "max": element.maxTransAmt,
                            "min": element.minTransAmt
                        });
                    }
                });
            });
        }

        function getThirdDepositType() {
            getJsonData("/t7m/Member/GetMemberThirdDepositType", null, function(response) {
                $('div#menu').append($('<div />', {
                        'class': 'col-6 p-0'
                    })
                    .append($('<div />', {
                            'class': 'deposit-chip',
                            'onclick': 'showDeposit(1)'
                        })
                        .append($('<i />', {
                            'class': 'icon-payment icon-payment0'
                        })).append($('<span />').html('银行卡转账'))));
                if (response.data && response.result && response.data.length > 0) {
                    response.data.forEach(function(element, index) {
                        if (element.models == 1 || element.models == 3) {
                            if (element.offline) {
                                $('div#menu').append($('<div />', {
                                        'class': 'col-6 p-0'
                                    })
                                    .append($('<div />', {
                                            'class': 'deposit-chip',
                                            'onclick': 'showDeposit(3, ' + element.tppType + ')'
                                        })
                                        .append($('<i />', {
                                            'class': 'icon-payment icon-payment' + element.tppType
                                        })).append($('<span />').html(element.typeName))));
                            } else {
                                $('div#menu').append($('<div />', {
                                        'class': 'col-6 p-0'
                                    })
                                    .append($('<div />', {
                                            'class': 'deposit-chip',
                                            'onclick': 'showDeposit(2, ' + element.tppType + ')'
                                        })
                                        .append($('<i />', {
                                            'class': 'icon-payment icon-payment' + element.tppType
                                        })).append($('<span />').html(element.typeName))));
                            }
                        }
                    });
                }
            });
        }

        function getThirdDepositBankList(bankId) {
            $('#ebanks select').empty();
            getJsonData("/t7m/Member/GetMemberThirdDepositBankList", {
                'bankId': bankId
            }, function(response) {
                if (response.data && response.data.length > 0) {
                    thirdBank = response.data;
                    response.data.forEach(function(element, index) {
                        $('#ebanks select').append($('<option />', {
                            'value': index
                        }).html(element.bankName + '(' + element.accTypeName + ')'));
                    });
                }
            });
        }

        function getThirdDepositList(tppType) {
            $('#payment2 select#third').empty();
            getJsonData("/t7m/Member/GetMemberThirdDepositList", {
                'tppType': tppType
            }, function(response) {
                if (response.data && response.data.length > 0) {
                    response.data.forEach(function(element, index) {
                        $('#payment2 select#third').append($('<option />', {
                            'value': element.bankID
                        }).html(element.bankName));
                        thirdMap[element.bankID] = element;
                        if (index == 0) {
                            $('#ebanks input[name=tppDtId]').val(element.tppDtID);
                            $('#ebanks input[name=bankId]').val(element.bankID);
                            $('div#payment2 label#min').html(element.minTransAmt);
                            $('div#payment2 label#max').html(element.maxTransAmt);
                            $('div#payment2 input[name=amount]').attr({
                                "max": element.maxTransAmt,
                                "min": element.minTransAmt
                            });
                            addQsAmount(element.qsAmount);
                            if ($('#payment2 input[name=payment]').val() == 256) getThirdDepositBankList(element.bankID);
                        }
                    });
                }
            });
        }

        function addQsAmount(data) {
            $('.qsAmount').empty();
            if (data && data.length > 0) {
                data.forEach(function(element, index) {
                    $('.qsAmount').append($('<button />', {
                        'type': 'button',
                        'class': 'btn btn-outline-danger btn-sm mt-2 ml-2',
                        'onClick': 'setAmount(this);'
                    }).html(element));
                });
            }
        }

        function setAmount(element) {
            $(element).parents('.tkgz_list').find('input[name=amount]').val($(element).text());
        }

        function getDepositTip() {
            getJsonData("/t7m/Site/SiteInfo", null, function(response) {
                obj = JSON.parse(response.data);
                obj.paramList.forEach(function(element, index) {
                    params[element.paramKey] = element;
                    if (element.paramKey == 14) {
                        $('div.tip div.text p').append(element.paramValue_CN);
                    }
                });
            });
        }

        function getMemberQrCodePayInfo(tppType) {
            getJsonData("/t7m/Member/GetMemberQrCodePayInfo", {
                'tppType': tppType
            }, function(response) {
                if (response.result) {
                    $('#payment3 img#qrCode').attr('src', response.data.qrCode);
                    $('#payment3 input[name=payment]').val(response.data.bankID);
                    $('div#payment3 label#min').html(response.data.minTransAmt);
                    $('div#payment3 label#max').html(response.data.maxTransAmt);
                    $('div#payment3 input[name=amount]').attr({
                        "max": response.data.maxTransAmt,
                        "min": response.data.minTransAmt
                    });
                }
            });
        }

        $(function() {
            $.validator.addMethod("selectRequired", function(value, element, arg) {
                return arg !== value;
            }, "Please select an item.");

            $('#deposit').validate({
                errorClass: 'err_msg',
                errorPlacement: function(error, element) {
                    element.parent().append(error);
                },
                submitHandler: function(form) {
                    if ($('input[name=type]').val() == 2) {
                        if ($('div#payment2 input[name=payment]').val() == 256) {
                            var i = $('#ebanks select option:selected').val();
                            $('#ebanks input[name=tppDtId]').val(thirdBank[i].tppDtID);
                            $('#ebanks input[name=bankId]').val(thirdBank[i].bankID);
                            $('#ebanks input[name=bankCode]').val(thirdBank[i].bankCode);
                            $('#ebanks input[name=accType]').val(thirdBank[i].accType);
                        }
                    }
                    getJsonData("/t7m/Member/MemberDepositApply", $(form).serialize(), checkResult, null, true);
                }
            });

            $("select#bank").change(function() {
                var bankId = $(this).val();
                $('div#amount1 div.bank_tips p').html("");
                banks.forEach(function(element) {
                    if (bankId == element.bankID) {
                        $('div#payment1 label#min').html(element.minTransAmt);
                        $('div#payment1 label#max').html(element.maxTransAmt);
                        $('div#payment1 input[name=amount]').attr({
                            "max": element.maxTransAmt,
                            "min": element.minTransAmt
                        });
                    }
                });
            });

            $("#payment2 select#third").change(function() {
                var t = thirdMap[$(this).val()];
                $('#ebanks input[name=tppDtId]').val(t.tppDtID);
                $('#ebanks input[name=bankId]').val(t.bankID);
                $('div#payment2 label#min').html(t.minTransAmt);
                $('div#payment2 label#max').html(t.maxTransAmt);
                $('div#payment2 input[name=amount]').attr({
                    "max": t.maxTransAmt,
                    "min": t.minTransAmt
                });
                getThirdDepositBankList(t.bankID);
                addQsAmount(t.qsAmount);
            });

            getBankList();
            getThirdDepositType();
            getDepositTip();

            clipboard = new ClipboardJS('.copy');
            clipboard.on('success', function(e) {
                layer.msg(e.text + ' 已复制');
                e.clearSelection();
            });

            clipboard.on('error', function(e) {
                layer.msg('复制失败');
            });
        });
    </script>
</body>
</html>