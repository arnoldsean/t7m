<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/themes/default/style.min.css">
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>T7传统</title>
    <link rel="shortcut icon" type="image/x-icon" href="../../../t7m/resource/img/peopleagent/favicon.ico">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link rel="stylesheet" href="../../../t7m/resource/css/bootstrap.min.css">
    <link rel="styleSheet" href="../../../t7m/resource/css/peopleagent/style.css">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/wonder.css" class="wonder-core">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/blue-style.css" class="wonder-style">
    <link rel="stylesheet" href="../../../t7m/resource/css/peopleagent/red-style.css" class="wonder-style">
    <script type="text/javascript" src="../../../t7m/resource/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/popper.min.js"></script>
    <script defer="" type="text/javascript" src="../../../t7m/resource/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/assets/layer/js/layer.js"></script>
    <link rel="stylesheet" href="http://210.244.18.147/t7m/resource/assets/layer/js/theme/default/layer.css?v=3.1.1" id="layuicss-layer">

    <script type="text/javascript">
        function iosViewEvent() {
            document.documentElement.addEventListener('touchstart', function(event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            }, false);

            var lastTouchEnd = 0;
            document.documentElement.addEventListener('touchend', function(event) {
                var now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
        }

        window.onload = function() {
            setTimeout(function() {
                window.scrollTo(0, 1);
            }, 100);

            iosViewEvent();
        }
    </script>
    <style>
        ul.dtr-details li {
            display: table;
        }
        
        .nav-pills {
            overflow-x: auto;
            overflow-y: hidden;
            flex-wrap: nowrap;
        }
        
        .nav-pills .nav-link {
            border-radius: 0;
        }
        
        .nav-pills .nav-link.active,
        .nav-pills .show>.nav-link {
            color: #FFF;
            background-color: #BC1015;
        }
        
        .dropdown-menu {
            top: calc(100% + .625rem) !important;
            /* left: 50% !important; */
            transform: translate(-86px, 0px) !important;
            font-size: 0.88rem;
            background: #EEE;
            zoom: 1;
        }
        
        .form-check-input {
            width: inherit;
        }
        
        #member-dropdown .dropdown-menu.show {
            width: 100vw;
        }
        
        .layui-layer .tkgz_list span {
            padding-left: 0;
            width: 6rem;
        }
    </style>
</head>

<body>
    <div class="wrap" id="container">
        <header class="">
            <div class="go-back-wrap">
                <a class="go-back" href="javascript:void(0);" onclick="history.go(-1)">
                    <i class="fas fa-chevron-left" style="margin-right: 3px;"></i>
                    返回
                </a>
            </div>
            <div class="info-wrap">
                <div>
                    <span class="title">团队管理</span>
                </div>
            </div>
            <div>
                <a class="btn-list" onclick="openElement('#sidebar');">
                    <i class="fas fa-bars"></i>
                </a>
            </div>
        </header>
        <input id="contextPath" type="hidden" value="/t7m">
        <div class="lds-ring" style="display: none;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <script>
            gameCode = '';
            contextPath = $('#contextPath').val();
            $(function() {
                //   setStyleFromCookie();
                callHeaderTouch();
                /*if ("true" !== "false") {
                  intervalBalance();
                }*/
            });

            function callHeaderTouch() {
                headerTouch();
            }

            function headerTouch() {
                $('.account-box').on('touchstart', function() {
                    $(this).css('background', 'rgb(19, 63, 142)');
                });

                $('.account-box').on('touchend', function() {
                    $(this).removeAttr("style");
                });
            }

            function intervalBalance() {
                var balanceIvl = setInterval(function() {
                    if ("true" !== "true") {
                        clearInterval(balanceIvl);
                    }
                    getJsonData(document.getElementById("contextPath").value + '/Member/GetBalance', null, changeBalance);
                }, 60000)
            }

            function changeBalance(response) {
                $('header .coin').html('<i class="icon-coin"/>' + getCurrency(response) + '元');
            }

            function changeAfterBetBalance(response) {
                $('.balance-bar .coin').html(getCurrency(response));
            }
        </script>
        <div class="mainer" style="font-size: 0.88rem;">
            <div class="row bg-white payment-title py-2 no-gutters justify-content-between align-items-center">
                <div class="ml-3 row mange_team">
                    <input type="text" value="">
                    <!-- <span>当前代理：</span>
                    <div class="dropdown" id="member-dropdown">
                        <a class="dropdown-toggle" href="javascript:void(0);" role="button" id="memberTree" data-display="static" data-toggle="dropdown" data-offset="-90px" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user-friends mr-1"></i>
                            test23
                        </a>
                        <div class="dropdown-menu" aria-labelledby="memberTree">
                            <div class="col-12 mb-1">
                                <button type="button" class="btn btn-sm btn-secondary" onclick="$('#memberTreeContent').jstree('open_all');">展开</button>
                                <button type="button" class="btn btn-sm btn-secondary" onclick="$('#memberTreeContent').jstree('close_all');">收合</button>
                            </div>
                            <div id="memberTreeContent" class="jstree jstree-1 jstree-default" role="tree" aria-multiselectable="true" tabindex="0" aria-activedescendant="j1_1" aria-busy="false">
                                <ul class="jstree-container-ul jstree-children jstree-wholerow-ul jstree-no-dots" role="group">
                                    <li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_1_anchor" id="j1_1" class="jstree-node  jstree-leaf jstree-last">
                                        <div unselectable="on" role="presentation" class="jstree-wholerow"> </div>
                                        <i class="jstree-icon jstree-ocl" role="presentation"></i>
                                        <a class="jstree-anchor" href="#" tabindex="-1" id="j1_1_anchor">
                                            <i class="jstree-icon jstree-themeicon fas fa-user-friends mr-1 jstree-themeicon-custom" role="presentation"></i>
                                            test23
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div> -->
                </div>
                <button type="button" class="btn btn-danger btn-sm mr-2 mange_team_search" id="backSuperior" onclick="">查询</button>
            </div>
            <!-- <ul class="nav nav-pills" id="agent-tab" role="tablist">
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link active" id="member-list-tab" data-toggle="pill" href="#member-list" role="tab" aria-controls="member-list" aria-selected="true">旗下</a>
                </li>
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link" id="basic-information-tab" data-toggle="pill" href="#basic-information" role="tab" aria-controls="basic-information" aria-selected="false">基本资料</a>
                </li>
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link" id="bonus-group-setting-tab" data-toggle="pill" href="#bonus-group-setting" role="tab" aria-controls="bonus-group-setting" aria-selected="false">奖金组设定</a>
                </li>
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link" id="profit-setting-tab" data-toggle="pill" href="#profit-setting" role="tab" aria-controls="profit-setting" aria-selected="false">返水设定</a>
                </li>
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link" id="link-registration-tab" data-toggle="pill" href="#link-registration" role="tab" aria-controls="link-registration" aria-selected="false">链接注册</a>
                </li>
                <li class="flex-fill nav-item">
                    <a class="text-center text-nowrap nav-link" id="link-management-tab" data-toggle="pill" href="#link-management" role="tab" aria-controls="link-management" aria-selected="false">链接管理</a>
                </li>
            </ul> -->
            <div class="tab-content jjsm_tab" id="pills-tabContent">
                <div class="tab-pane fade show active" id="member-list" role="tabpanel" aria-labelledby="member-list-tab">
                    <!-- <div class="row no-gutters py-1 justify-content-between align-items-center bg-white">
                        <label for="startDate" class="ml-3">旗下代理</label>
                        <button type="button" class="btn btn-dark btn-sm mr-2 add-btn" onclick="showAddMember(true);">新增</button>
                    </div> -->
                    <div id="agentTable_wrapper" class="dataTables_wrapper no-footer">
                        <table id="agentTable" class="nowrap no-footer dataTable" role="grid" aria-describedby="agentTable_info" style="">
                            <thead>
                                <tr role="row">
                                    <th></th>
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="" aria-sort="descending">用戶名</th>
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="" aria-sort="descending">下级数</th>
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="" aria-sort="descending">上级</th>
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="" aria-sort="descending">注册时间</th>
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="" aria-sort="descending">在线</th>

                                    <!-- <th class="dt-left sorting" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="状态: 升冪排列" style="width: 54px;">状态</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="最后登录时间: 升冪排列" style="width: 133px;">最后登录时间</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="agentTable" rowspan="1" colspan="1" aria-label="操作: 升冪排列" style="width: 55px;">操作</th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="odd">
                                    <!-- <td valign="top" colspan="4" class="dataTables_empty">查无资料</!--> 
                                    <td class="odds"></td>
                                    <td>amos1988</td>
                                    <td>5</td>
                                    <td>amos1988</td>
                                    <td>2019-06-25</td>
                                    <td>离线</td>
                                </tr>
                                <tr class="">
                                    <td class=""></td>
                                    <td>amos1988</td>
                                    <td>5</td>
                                    <td>amos1988</td>
                                    <td>2019-06-25</td>
                                    <td>离线</td>
                                </tr>
                                <tr class="odd">
                                    <td class="odds"></td>
                                    <td>amos1988</td>
                                    <td>5</td>
                                    <td>amos1988</td>
                                    <td>2019-06-25</td>
                                    <td>离线</td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                    <div class="mb-4"></div>
                    <!-- <div class="row no-gutters py-1 justify-content-between align-items-center bg-white">
                        <label for="startDate" class="ml-3">旗下会员</label>
                        <button type="button" class="btn btn-dark btn-sm mr-2 add-btn" onclick="showAddMember(false);">新增</button>
                    </div> -->
                    <!-- <div id="memberTable_wrapper" class="dataTables_wrapper no-footer">
                        <table id="memberTable" class="nowrap no-footer dataTable" role="grid" aria-describedby="memberTable_info" style="">
                            <thead>
                                <tr role="row">
                                    <th class="dt-left sorting_desc" tabindex="0" aria-controls="memberTable" rowspan="1" colspan="1" aria-label="用戶名: 升冪排列" style="width: 49px;" aria-sort="descending">用戶名</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="memberTable" rowspan="1" colspan="1" aria-label="可用额度: 升冪排列" style="width: 65px;">可用额度</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="memberTable" rowspan="1" colspan="1" aria-label="状态: 升冪排列" style="width: 34px;">状态</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="memberTable" rowspan="1" colspan="1" aria-label="最后登录时间: 升冪排列" style="width: 96px;">最后登录时间</th>
                                    <th class="dt-left sorting" tabindex="0" aria-controls="memberTable" rowspan="1" colspan="1" aria-label="操作: 升冪排列" style="width: 36px;">操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="odd">
                                    <td valign="top" colspan="5" class="dataTables_empty">查无资料</td>
                                </tr>
                            </tbody>
                        </table>
                    </div> -->
                </div>
                <div class="mange_page clear">
                    <span class="mange_pre">上一页</span>
                    <ul>
                        <li>1</li><li>2</li><li>3</li>
                    </ul>
                    <span class="mange_nex">下一页</span>
                </div>
                <div class="tab-pane fade" id="basic-information" role="tabpanel" aria-labelledby="basic-information-tab">
                    <div class="tkgz_tab">
                        <div class="tkgz_list p-2">
                            <span>代理推荐码</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input type="text" readonly="readonly" value="T7006672">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>状态</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input type="text" readonly="readonly" value="未验证">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>注册时间</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input type="text" readonly="readonly" value="2019-03-28 09:45:06">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="tkgz_list p-2">
                            <span>上次登入时间</span>
                            <div class="tkgz_list_web">
                                <div class="tkgz_list_inp">
                                    <input type="text" readonly="readonly" value="2019-05-27 20:15:47">
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="bonus-group-setting" role="tabpanel" aria-labelledby="bonus-group-setting-tab">
                    <div class="tkgz_tab">
                        <div class="setting-content">
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">时时彩</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="20">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">快三</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="21">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">11选5</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="22">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">赛车</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="23">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">3D</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="24">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">香港六合彩</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="25">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">PC蛋蛋</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="26">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">七星彩</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="39">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">分分彩</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="40">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">分分快三</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="51">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">分分赛车</span>
                                <span class="col-5 text-right range-slider-value">2000</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="52">
                                    <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="profit-setting" role="tabpanel" aria-labelledby="profit-setting-tab">
                    <div class="tkgz_tab">
                        <div class="setting-content">
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">CQ9电子</span>
                                <span class="col-5 text-right range-slider-value">3</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="44">
                                    <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">CQ9捕鱼</span>
                                <span class="col-5 text-right range-slider-value">3</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="48">
                                    <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                </div>
                            </div>
                            <div class="form-group row m-0 py-2">
                                <span class="col-7 text-left">乐游棋牌</span>
                                <span class="col-5 text-right range-slider-value">3</span>
                                <div class="range-slider text-center hidden">
                                    <input type="hidden" name="spid" value="55">
                                    <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="link-registration" role="tabpanel" aria-labelledby="link-registration-tab">
                    <div class="tkgz_tab">
                        <div class="tkgz_list p-2">
                            <div class="d-flex align-items-center">
                                <span class="pl-1">开户类别</span>
                                <div class="icheck-list py-1">
                                    <input type="radio" id="linkMemberType1" name="memberType" value="0" checked="">
                                    <label class="" for="linkMemberType1">会员  </label>
                                </div>
                            </div>
                            <div class="d-flex align-items-center">
                                <span> </span>
                                <div class="icheck-list py-1">
                                    <input type="radio" id="linkMemberType2" name="memberType" value="1">
                                    <label class="" for="linkMemberType2">一级代理</label>
                                </div>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="setting-form">
                            <div class="refund setting">
                                <div class="p-2 d-flex justify-content-between align-items-center">
                                    <span class="pl-2">奖金组设定</span>
                                    <div class="d-flex justify-content-end align-items-center">
                                        <label class="col-form-label">最低</label>
                                        <label class="bs-switch mx-2" style="opacity: 0.4;">
                                            <input type="checkbox" class="default simple" id="refundSettingLink" checked="">
                                            <span class="slider round"></span>
                                        </label>
                                        <label class="col-form-label">最高</label>
                                    </div>
                                </div>
                                <div class="form-group row m-0">
                                    <div class="form-check icheck-list">
                                        <input class="form-check-input advanced" type="checkbox" id="advancedRefundLink">
                                        <label class="form-check-label" for="advancedRefundLink">进阶设定</label>
                                    </div>
                                </div>
                                <div class="setting-content"></div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">时时彩</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="20">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">快三</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="21">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">11选5</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="22">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">赛车</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="23">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">3D</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="24">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">香港六合彩</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="25">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">PC蛋蛋</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="26">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">七星彩</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="39">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">分分彩</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="40">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">分分快三</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="51">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">分分赛车</span>
                                    <span class="col-5 text-right range-slider-value">2000</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="52">
                                        <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                                    </div>
                                </div>
                            </div>
                            <div class="profit setting">
                                <div class="p-2 d-flex justify-content-between align-items-center">
                                    <span class="pl-2">返水设定</span>
                                    <div class="d-flex justify-content-end align-items-center">
                                        <label class="col-form-label">最低</label>
                                        <label class="bs-switch mx-2" style="opacity: 0.4;">
                                            <input type="checkbox" class="default simple" id="profitSettingLink" checked="">
                                            <span class="slider round"></span>
                                        </label>
                                        <label class="col-form-label">最高</label>
                                    </div>
                                </div>
                                <div class="form-group row m-0">
                                    <div class="form-check icheck-list">
                                        <input class="form-check-input advanced" type="checkbox" id="advancedProfitLink">
                                        <label class="form-check-label" for="advancedProfitLink">进阶设定</label>
                                    </div>
                                </div>
                                <div class="setting-content"></div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">CQ9电子</span>
                                    <span class="col-5 text-right range-slider-value">3</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="44">
                                        <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">CQ9捕鱼</span>
                                    <span class="col-5 text-right range-slider-value">3</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="48">
                                        <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                    </div>
                                </div>
                                <div class="form-group row m-0 py-2">
                                    <span class="col-7 text-left">乐游棋牌</span>
                                    <span class="col-5 text-right range-slider-value">3</span>
                                    <div class="range-slider text-center">
                                        <input type="hidden" name="spid" value="55">
                                        <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mx-4 py-3">
                            <button type="button" class="btn-submit" onclick="createUrl()">提交</button>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="link-management" role="tabpanel" aria-labelledby="link-management-tab">
                    <div class="tkgz_tab"></div>
                </div>
            </div>
        </div>
        <div class="sub-page">
            <header class="">
                <div class="go-back-wrap">
                    <a class="go-back" href="javascript:void(0);" onclick="closeElement('.sub-page');">
                        <i class="fas fa-chevron-left" style="margin-right: 3px;"></i>
                        返回
                    </a>
                </div>
                <div class="text-nowrap">
                    <span class="title">开户</span>
                </div>
                <div></div>
            </header>
            <div class="setting-form">
                <form id="setting-form">
                    <div class="tkgz_list p-2">
                        <div class="d-flex align-items-center">
                            <span>开户类别</span>
                            <div class="icheck-list py-1">
                                <input type="radio" id="memberType1" name="memberType" value="0" checked="">
                                <label class="" for="memberType1">会员</label>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <span> </span>
                            <div class="icheck-list py-1">
                                <input type="radio" id="memberType2" name="memberType" value="1">
                                <label class="" for="memberType2">一级代理</label>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <span> </span>
                            <div class="icheck-list py-1">
                                <input type="radio" id="memberType3" name="memberType" value="2">
                                <label class="" for="memberType3">二级代理</label>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="tkgz_list p-2 align-items-center d-flex">
                        <span>注册账号</span>
                        <div class="tkgz_list_web">
                            <div class="tkgz_list_inp">
                                <input type="text" name="childLoginId" placeholder="请输入注册账号" required="">
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="tkgz_list p-2 align-items-center d-flex">
                        <span>登录密码</span>
                        <div class="tkgz_list_web">
                            <div class="tkgz_list_inp">
                                <input type="text" name="childLoginPw" placeholder="请输入登录密码" required="">
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="mx-4 py-3">
                        <button type="button" class="btn-submit" onclick="submitForm()">提交</button>
                    </div>
                </form>
                <div class="tkgz_tab">
                    <div class="refund setting">
                        <div class="p-2 d-flex justify-content-between align-items-center">
                            <span class="pl-2">奖金组设定</span>
                            <div class="d-flex justify-content-end align-items-center">
                                <label class="col-form-label">最低</label>
                                <label class="bs-switch mx-2" style="opacity: 0.4;">
                                    <input type="checkbox" class="default simple" id="refundSetting" checked="">
                                    <span class="slider round"></span>
                                </label>
                                <label class="col-form-label">最高</label>
                            </div>
                        </div>
                        <div class="form-group row m-0">
                            <div class="form-check icheck-list">
                                <input class="form-check-input advanced" type="checkbox" id="advancedRefund">
                                <label class="form-check-label" for="advancedRefund">进阶设定</label>
                            </div>
                        </div>
                        <div class="setting-content"></div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">时时彩</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="20">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">快三</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="21">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">11选5</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="22">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">赛车</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="23">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">3D</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="24">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1700" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">香港六合彩</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="25">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">PC蛋蛋</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="26">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">七星彩</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="39">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">分分彩</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="40">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">分分快三</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="51">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">分分赛车</span>
                            <span class="col-5 text-right range-slider-value">2000</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="52">
                                <input class="range-slider-range" type="range" step="2" max="2000" min="1800" value="2000" disabled="disabled">
                            </div>
                        </div>
                    </div>
                    <div class="profit setting">
                        <div class="p-2 d-flex justify-content-between align-items-center">
                            <span class="pl-2">返水设定</span>
                            <div class="d-flex justify-content-end align-items-center">
                                <label class="col-form-label">最低</label>
                                <label class="bs-switch mx-2" style="opacity: 0.4;">
                                    <input type="checkbox" class="default simple" id="profitSetting" checked="">
                                    <span class="slider round"></span>
                                </label>
                                <label class="col-form-label">最高</label>
                            </div>
                        </div>
                        <div class="form-group row m-0">
                            <div class="form-check icheck-list">
                                <input class="form-check-input advanced" type="checkbox" id="advancedProfit">
                                <label class="form-check-label" for="advancedProfit">进阶设定</label>
                            </div>
                        </div>
                        <div class="setting-content"></div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">CQ9电子</span>
                            <span class="col-5 text-right range-slider-value">3</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="44">
                                <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">CQ9捕鱼</span>
                            <span class="col-5 text-right range-slider-value">3</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="48">
                                <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group row m-0 py-2">
                            <span class="col-7 text-left">乐游棋牌</span>
                            <span class="col-5 text-right range-slider-value">3</span>
                            <div class="range-slider text-center">
                                <input type="hidden" name="spid" value="55">
                                <input class="range-slider-range" type="range" step="0.1" max="3" min="0" value="3" disabled="disabled">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <label class="hidden" id="copy-link"></label> -->
        <div class="container text-center hidden" id="qrCodeInfo">
            <p>扫一扫二维码即可注册</p>
            <div class="row justify-content-end mt-2" id="qrCode"></div>
            <div class="mx-4 py-3">
                <input type="text" class="text-white" id="copy-link" readonly="">
                <button type="button" class="btn-submit" id="copy-link-btn" data-clipboard-target="#copy-link">复制链接</button>
            </div>
        </div>
        <div class="container text-center hidden" id="linkInfo">
            <form id="linkInfoForm">
                <input type="hidden" name="uid">
                <div class="tkgz_list p-2">
                    <div class="d-flex align-items-center">
                        <span class="pl-1">状态</span>
                        <div class="icheck-list py-1">
                            <input type="radio" id="status0" name="status" value="0">
                            <label class="" for="status0">停用</label>
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <span> </span>
                        <div class="icheck-list py-1">
                            <input type="radio" id="status1" name="status" value="1">
                            <label class="" for="status1">正常</label>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
        <div class="container text-center hidden" id="transferInfo">
            <form id="transferForm" style="font-size: 0.875rem;" novalidate="novalidate">
                <input type="hidden" name="memberId">
                <div class="tkgz_list p-2">
                    <span>转帐点数</span>
                    <div class="tkgz_list_web">
                        <div class="tkgz_list_inp">
                            <input type="number" name="points" min="0" step="1" placeholder="请输入转帐点数" required="">
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="tkgz_list p-2">
                    <span>提款密码</span>
                    <div class="tkgz_list_web">
                        <div class="tkgz_list_inp">
                            <input type="password" name="accPassword" placeholder="请输入提款密码" required="">
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="tkgz_list p-2">
                    <span>备注</span>
                    <div class="tkgz_list_web">
                        <div class="tkgz_list_inp">
                            <input type="text" name="remark">
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
        <div id="sidebar">
            <div class="header">
                <div class="mb-2 show-user flex-column">
                    <img class="rounded-circle" src="../../../t7m/resource/img/peopleagent/icon-user.jpg">
                    <span>test23</span>
                </div>
                <div class="show-coin">余额：<span class="points">28,901.445</span>元</div>
                <div class="justify-content-between">
                    <button type="button" class="btn-icon charge-button" onclick="goDeposit();"></button>
                    <button type="button" class="btn-icon withdraw-button" onclick="goWithdraw();"></button>
                </div>
                <div class="justify-content-center">
                    <a class="d-inline-block transfer-button" href="javascript:void(0);" onclick="goTransfer();"></a>
                </div>
            </div>
            <div class="list-menu-wrap" style="height:577.344px;">
                <ul class="list-menu">
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-account"></i>
                            <span>帐户中心</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/changeLoginPassword">修改密码</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/changeWithdrawPassword">提款密码</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/bankCardManagement">银行卡管理</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/myReward">个人总览</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-funds"></i>
                            <span>资金管理</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/deposit">充值</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/withdraw">提款</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/transfer">钱包转换</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/dwRecord">充提记录</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/acRecord">帐变记录</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/tRecord">转账记录</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()">
                            <i class="icon icon-game-record"></i>
                            <span>游戏记录</span>
                            <i class="fas fa-caret-right"></i>
                        </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/order_list">个人投注</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/gameWater">游戏流水</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" onclick="toggleSubmenu()"><i class="icon icon-agent-center">
                        </i><span>代理中心</span><i class="fas fa-caret-right"></i>
                    </a>
                        <ul>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/agentMember">团队管理</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/teamReport">团队报表</a>
                            </li>
                            <li>
                                <a class="obstruct" href="/t7m/mobile/personal/teamReward">团队总览</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goRule();">
                            <i class="icon icon-game-rule"></i>
                            <span>彩票规则</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goPromotion();">
                            <i class="icon icon-promotion"></i>
                            <span>优惠活动</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goCustomerService();">
                            <i class="icon icon-customer-service"></i>
                            <span>客服</span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-icon" href="javascript:void(0);" onclick="goLogout();">
                            <i class="icon icon-exit"></i>
                            <span>登出</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="d-flex justify-content-around footer">
                <div class="d-flex align-items-center">
                    <i class="d-inline-block s-icon icon-copyright mr-1"></i>
                    <span>版本号：V1.0</span>
                </div>
                <div class="d-flex align-items-center" onclick="clearCache();">
                    <i class="d-inline-block s-icon icon-clean mr-1"></i>
                    <span>清除缓存</span>
                </div>
            </div>
        </div>
        <a class="sidebar-mask" onclick="closeElement('#sidebar')"></a>
        <!-- message -->
        <div class="mask" style="display: none;">
            <div class="message_container flex-column">
                <div class="message-header text-center">
                    <span class="mt-2">讯息中心</span>
                    <div class="close_icon">
                        <a id="icon_close" href="javascript:void(0);"></a>
                    </div>
                </div>
                <div class="aside item_2">
                    <div class="message_wrap"></div>
                </div>
            </div>
        </div>
        <script>
            $(function() {
                resizeSidebar();
                messageEvent();

                $('ul.list-menu ul li').click(function() {
                    location.href = $(this).find('a').first().attr('href');
                    return false;
                });
            });

            function resizeSidebar() {
                var h = $('#sidebar').outerHeight() - ($('#sidebar .header').outerHeight() + $('#sidebar .footer').outerHeight() + 5);
                $('#sidebar .list-menu-wrap').attr('style', 'height:' + h + 'px;');
            }

            function messageEvent() {
                if ("true" === "true") {
                    getMessageCount();
                }
                openMessageBind();
                closeMessageBind();
            }

            function getMessageCount() {
                getJsonData("/t7m/Member/GetUserMessage", null, setMessageCount);
            }

            function getMessage() {
                getJsonData("/t7m/Member/GetUserMessage", null, setMessage);
            }

            function setMessageCount(response) {
                var count = 0;
                if (response.data) {
                    $.each(response.data, function(entryIdx, entry) {
                        if (entry['msgStatus'] == 1) count++;
                    });
                }
                $('#message_count').text(count);
            }

            function setMessage(response) {
                $('.message_wrap').empty();
                var count = 0;
                var title = '';
                var conternt = '尚無訊息';
                var msgTime = '';
                if (response.data) {
                    $.each(response.data, function(entryIdx, entry) {
                        title = entry['msgTitle'];
                        conternt = entry['msgContent'];
                        msgTime = entry['msgTime'];
                        var target = $('<div />', {
                                'class': 'outside'
                            })
                            .append($('<div />', {
                                    'class': 'message_list'
                                })
                                .append($('<div />', {
                                    'class': 'message_title text-truncate'
                                }).text(title))
                                .append($('<div />', {
                                    'class': 'message_content'
                                }).text(conternt))
                                .append($('<div />', {
                                    'class': 'message_date sub-title'
                                }).text(msgTime)));
                        if (entry['msgStatus'] == 1) {
                            target.append($('<div />', {
                                    'class': 'message_status'
                                })
                                .append($('<a />', {
                                    'class': 'unread',
                                    'href': '#',
                                    'onClick': 'readMessage(' + entry['msgID'] + ', this)'
                                }).text('标示为已读')));
                            count++;
                        } else {
                            target.find('.message_list').append($('<div />', {
                                'class': 'golgol'
                            }));
                        }
                        target.appendTo('.message_wrap');
                    });
                    $('#message_count').text(count);
                } else {
                    $('.message_count_wrap').remove();
                }
                $('.mask').show();
            }

            function readMessage(id, a) {
                a.classList.add("marked");

                var map = new Object();
                map['msgId'] = id;
                getJsonData("/t7m/Member/UpdateUserMessage", map, updateMessageStatus);
            }

            function updateMessageStatus() {
                var mark = document.getElementsByClassName("marked");
                for (var i = 0; i < mark.length; i++) {
                    $(mark[i]).parents('.outside').find('.message_list').append($('<div />', {
                        'class': 'golgol'
                    }));
                    mark[i].innerHTML = '';
                    mark[i].classList.remove("unread");
                    mark[i].classList.remove("marked");
                }
                $('#message_count').html(document.getElementsByClassName("unread").length);
            }

            function openMessageBind() {
                $('.trigger_message').click(function() {
                    if ("true" === "true") {
                        getMessage();
                    } else {
                        layer.open({
                            title: '警告',
                            content: '请先登录',
                            icon: 0,
                            btnAlign: 'c',
                            yes: function(index, layero) {
                                goSignIn(index);
                            }
                        });
                    }
                });
            }

            function closeMessageBind() {
                $('#icon_close').click(function() {
                    $('.mask').hide();
                    $('.member_menu').removeClass('member_menu_reduce');
                });
            }

            function refreshPoint() {
                if ("true" === "true") {
                    getJsonData("/t7m/Member/RefreshUserWallets", null, function(response) {
                        if (response.result) {
                            var w = response.data.find(function(item, index, array) {
                                return item.walletID == 0;
                            });
                            $('.points').html(getCurrency(w.balance));
                        } else {
                            showErrorResult(response.message);
                        }
                    }, null, true);
                }
            }
        </script>
        <script type="text/javascript" src="../../../t7m/resource/assets/socket.io-client/socket.io.slim.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/moment-with-locales.min.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/swiper.min.js"></script>
        <script type="text/javascript" src="../../../t7m/resource/js/peopleagent/custom.js" data-url="https://x20.d7601.com"></script>

        <ul class="bottom-menu">
            <li class="active"><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-hall"></i><span>首页</span></a></li>
            <li class=""><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-lottery"></i><span>彩票</span></a></li>
            <li><a class="btn-icon" href="javascript:void(0);" onclick="goPromotion();"><i
              class="icon icon-promotion"></i><span>优惠</span></a></li>
            <li class=""><a class="btn-icon" href="javascript:void(0);"><i class="icon icon-mine"></i><span>我的</span></a></li>
            <!-- <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goHall();">
                    <i class="icon icon-hall"></i>
                    <span>大厅</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goCustomerService();">
                    <i class="icon icon-customer-service"></i>
                    <span>客服</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goCenter();">
                    <i class="icon icon-manage"></i>
                    <span>管理中心</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon" href="javascript:void(0);" onclick="goLotteryRecord();">
                    <i class="icon icon-nav-game-result"></i>
                    <span>开奖结果</span>
                </a>
            </li>
            <li class="">
                <a class="btn-icon " href="javascript:void(0);" onclick="goPromotion();">
                    <i class="icon icon-nav-promotion"></i>
                    <span>活动</span>
                </a>
            </li> -->
        </ul>

        <script>
            $(function() {
                wsClient();
                callFooterTouch();
            });

            function wsClient() {
                initialWS();

                var interval = setInterval(function() {
                    if (ws.connected) {
                        clearInterval(interval);
                        if ("true" === "true") {
                            joinWS('23', 'test23', '0y6qr733adcf5fb444000a83b1c989901a70a0y6qr');
                        } else {
                            joinWS('23');
                        }
                    }
                }, 1000);
            }

            function callFooterTouch() {
                footerTouch();
            }

            function footerTouch() {
                $('.bottom-menu li').on('touchstart', function() {
                    $(this).css('background', 'rgba(78, 78, 76, 0.7)');
                    $(this).addClass('active').siblings().removeClass('active');
                });

                $('.bottom-menu li').on('touchend', function() {
                    $(this).removeAttr("style");
                });
            }
        </script>
    </div>

    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/jstree.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/qrcode.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../../../t7m/resource/js/messages_zh.js"></script>
    <script>
        var profitList;
        var refundList;
        var suId = [];
        var root = [];
        var options = {
            language: traditional_chinese_datatables,
            info: false,
            lengthChange: false,
            searching: false,
            ordering: true,
            responsive: true,
            order: [
                [0, "desc"]
            ],
            paging: false
        }

        function initialize() {
            $(document).on('change', '.simple', function() {
                if (this.checked) {
                    $(this).parents('div.setting').find('input.range-slider-range').each(function() {
                        $(this).val($(this).attr("max"));
                        $(this).parent().prev($('.range-slider-value')).html($(this).attr("max"));
                    });
                } else {
                    $(this).parents('div.setting').find('input.range-slider-range').each(function() {
                        if (!$(this).hasClass('disabled')) {
                            $(this).val($(this).attr("min"));
                            $(this).parent().prev($('.range-slider-value')).html($(this).attr("min"));
                        }
                    });
                }
            });

            $(document).on('change', '.advanced', function() {
                if (this.checked) {
                    $(this).parents('div.setting').find('.bs-switch').css('opacity', 0.4);
                    $(this).parents('div.setting').find('input.simple').prop('disabled', true);
                    $(this).parents('div.setting').find('input.range-slider-range').each(function() {
                        if (!$(this).hasClass('disabled')) {
                            $(this).prop('disabled', false);
                            $(this).css('opacity', 1);
                        }
                    });
                } else {
                    $(this).parents('div.setting').find('.bs-switch').css('opacity', 1);
                    $(this).parents('div.setting').find('input.simple').prop('disabled', false);
                    $(this).parents('div.setting').find('input.range-slider-range').each(function() {
                        $(this).prop('disabled', true);
                        $(this).css('opacity', 0.4);
                    });
                }
            });

            $.validator.addMethod('fourDigitsPassword', function(value, element, arg) {
                return this.optional(element) || /^\d{4}$/.test(value);
            }, "请输入一个4位数的密码");

            $('#transferForm').validate({
                errorClass: 'err_msg',
                errorPlacement: function(error, element) {
                    element.parent().append(error);
                },
                rules: {
                    accPassword: {
                        fourDigitsPassword: 4
                    }
                },
                submitHandler: function(form) {
                    getJsonData("/t7m/T7Member/TransferToChild", $(form).serialize(), function(response) {
                        if (response.result) {
                            layer.closeAll();
                        } else {
                            showErrorResult(response.message);
                        }
                    }, null, true);
                }
            });

            /* $(document).on('show.bs.dropdown', '#member-dropdown', function () {
              $('.dropdown-menu').css('transform', 'translate(-86.5px, 0px)');
            }); */
        }

        function updateTree() {
            $('#memberTreeContent').on('changed.jstree', function(e, data) {
                //console.log(data);
                //console.log(data.instance.get_node(data.selected[0]).text);
                $('#basic-information-tab').tab('show');
            }).jstree({
                "types": {
                    "default": {
                        "icon": "fas fa-user-friends mr-1"
                    },
                    "member": {
                        "icon": "fas fa-user"
                    }
                },
                "plugins": ["types", "wholerow"]
            });

            $('.dropdown-menu button, .dropdown-menu .jstree-node a, .dropdown-menu .jstree-node i').click(function(e) {
                e.stopPropagation();
            });
        }

        function clearTable() {
            var table = $('#agentTable').DataTable();
            table.clear();
            table.destroy();
            $('#agentTable').addClass('dataTable');

            table = $('#memberTable').DataTable();
            table.clear();
            table.destroy();
            $('#memberTable').addClass('dataTable');
        }

        function updateTable(response) {
            clearTable();
            $('#memberTree').empty();
            $('#memberTreeContent').empty();
            $("#memberTreeContent").jstree('destroy');

            if (response.result) {
                var data = JSON.parse(response.data);
                var loginId = root[root.length - 1];
                data.forEach(function(elm, idx) {
                    if (elm.loginID == loginId) {
                        if (elm.memberType == 0) {
                            $('#memberTree').append($('<i />', {
                                'class': 'fas fa-user mr-1'
                            })).append(elm.loginID);
                        } else {
                            $('#memberTree').append($('<i />', {
                                'class': 'fas fa-user-friends mr-1'
                            })).append(elm.loginID);
                        }

                        var basic = $('#basic-information div.tkgz_list_web');
                        for (var i = 0; i < basic.length; i++) {
                            $(basic[i]).empty();
                        }

                        $(basic[0]).append($('<div />', {
                            'class': 'tkgz_list_inp'
                        }).append($('<input />', {
                            'type': 'text',
                            'readonly': 'readonly',
                            'value': elm.rCode
                        })));
                        $(basic[2]).append($('<div />', {
                            'class': 'tkgz_list_inp'
                        }).append($('<input />', {
                            'type': 'text',
                            'readonly': 'readonly',
                            'value': elm.createTime
                        })));
                        $(basic[3]).append($('<div />', {
                            'class': 'tkgz_list_inp'
                        }).append($('<input />', {
                            'type': 'text',
                            'readonly': 'readonly',
                            'value': elm.lastLoginTime
                        })));

                        if (elm.loginID == 'test23') {
                            $('#link-registration-tab').show();
                            $('#link-management-tab').show();
                            $(basic[1]).append($('<div />', {
                                'class': 'tkgz_list_inp'
                            }).append($('<input />', {
                                'type': 'text',
                                'readonly': 'readonly',
                                'value': elm.statusName
                            })));
                        } else {
                            $(basic[1]).append($('<div />', {
                                'class': 'tkgz_list_inp'
                            }).append($('<input />', {
                                'type': 'text',
                                'readonly': 'readonly',
                                'value': elm.statusName
                            })));
                        }

                        $('#memberTreeContent').append($('<ul />').append($('<li />').append(elm.loginID).append($('<ul />'))));

                        getRefundList();
                        getProfitList();
                    } else {
                        if (elm.memberType == 0) {
                            $('#memberTable tbody').append($('<tr />')
                                .append($('<td />').append($('<i />', {
                                    'class': 'fas fa-user mr-1'
                                })).append($('<a />', {
                                    'href': 'javascript:void(0);',
                                    'onclick': 'getSubordinateList("' + elm.loginID + '",' + elm.memberID + ');'
                                }).append(elm.loginID)))
                                .append($('<td />').html(getCurrency(elm.points)))
                                .append($('<td />').html(elm.statusName))
                                .append($('<td />').html(elm.lastLoginTime))
                                .append($('<td />').append($('<button />', {
                                    'type': 'button',
                                    'class': 'btn btn-secondary btn-sm',
                                    'onclick': 'showTransferInfo(' + elm.memberID + ');'
                                }).html('转帐下级')))
                            );
                            $('#memberTreeContent ul ul').append($('<li />', {
                                'data-jstree': '{"type": "member"}',
                                'onclick': 'getSubordinateList("' + elm.loginID + '",' + elm.memberID + ');'
                            }).html(elm.loginID));
                        } else {
                            $('#agentTable tbody').append($('<tr />')
                                .append($('<td />').append($('<i />', {
                                    'class': 'fas fa-user-friends mr-1'
                                })).append($('<a />', {
                                    'href': 'javascript:void(0);',
                                    'onclick': 'getSubordinateList("' + elm.loginID + '",' + elm.memberID + ');'
                                }).append(elm.loginID)))
                                .append($('<td />').html(elm.statusName))
                                .append($('<td />').html(elm.lastLoginTime))
                                .append($('<td />').append($('<button />', {
                                    'type': 'button',
                                    'class': 'btn btn-secondary btn-sm',
                                    'onclick': 'showTransferInfo(' + elm.memberID + ');'
                                }).html('转帐下级')))
                            );
                            $('#memberTreeContent ul ul').append($('<li />', {
                                'data-jstree': '{"type": "default"}',
                                'onclick': 'getSubordinateList("' + elm.loginID + '",' + elm.memberID + ');'
                            }).html(elm.loginID));
                        }
                    }

                    //$('#memberTreeContent').append($('<ul />').append($('<li />').append(elm.loginID)));
                });

                showDataTable(data ? data.length : 0, null, options);
                updateTree();
            }
        }

        function getChildSettings() {
            getJsonData("/t7m/T7Member/ChildSettings", null, function(response) {
                if (response.result) {
                    var data = JSON.parse(response.data);
                    data.refundInfos.forEach(function(elm, idx) {
                        $('.setting-form .refund').append(
                            $('<div />', {
                                'class': 'form-group row m-0 py-2'
                            })
                            .append($('<span />', {
                                'class': 'col-7 text-left'
                            }).html(elm.spName))
                            .append($('<span />', {
                                'class': 'col-5 text-right range-slider-value'
                            }).html(elm.multipleMax))
                            .append($('<div />', {
                                    'class': 'range-slider text-center'
                                })
                                .append($('<input />', {
                                    'type': 'hidden',
                                    'name': 'spid',
                                    'value': elm.spID
                                }))
                                .append((elm.multipleMax == elm.multipleMin) ? $('<input />', {
                                    'class': 'range-slider-range disabled',
                                    'type': 'range',
                                    'step': 2,
                                    'max': elm.multipleMax,
                                    'min': elm.multipleMin - 2,
                                    'value': elm.multipleMax,
                                    'disabled': 'disabled'
                                }) : $('<input />', {
                                    'class': 'range-slider-range',
                                    'type': 'range',
                                    'step': 2,
                                    'max': elm.multipleMax,
                                    'min': elm.multipleMin,
                                    'value': elm.multipleMax,
                                    'disabled': 'disabled'
                                }))
                            )
                        );
                    });

                    data.profitInfos.forEach(function(elm, idx) {
                        $('.setting-form .profit').append(
                            $('<div />', {
                                'class': 'form-group row m-0 py-2'
                            })
                            .append($('<span />', {
                                'class': 'col-7 text-left'
                            }).html(elm.spName))
                            .append($('<span />', {
                                'class': 'col-5 text-right range-slider-value'
                            }).html(elm.rebatRateMax))
                            .append($('<div />', {
                                    'class': 'range-slider text-center'
                                })
                                .append($('<input />', {
                                    'type': 'hidden',
                                    'name': 'spid',
                                    'value': elm.spID
                                }))
                                .append($('<input />', {
                                    'class': 'range-slider-range',
                                    'type': 'range',
                                    'step': 0.1,
                                    'max': elm.rebatRateMax,
                                    'min': elm.rebatRateMin,
                                    'value': elm.rebatRateMax,
                                    'disabled': 'disabled'
                                }))
                            )
                        );
                    });

                    rangeSlider();
                } else {
                    showErrorResult(data.message);
                }
            }, null, true);
        }

        function updateProfitList(data) {
            $('#profit-setting .setting-content').empty();
            data.forEach(function(elm, idx) {
                $('#profit-setting .setting-content').append(
                    $('<div />', {
                        'class': 'form-group row m-0 py-2'
                    })
                    .append($('<span />', {
                        'class': 'col-7 text-left'
                    }).html(elm.spName))
                    .append($('<span />', {
                        'class': 'col-5 text-right range-slider-value'
                    }).html(elm.rebatRateMax))
                    .append($('<div />', {
                            'class': 'range-slider text-center'
                        })
                        .append($('<input />', {
                            'type': 'hidden',
                            'name': 'spid',
                            'value': elm.spID
                        }))
                        .append($('<input />', {
                            'class': 'range-slider-range',
                            'type': 'range',
                            'step': 0.1,
                            'max': elm.rebatRateMax,
                            'min': elm.rebatRateMin,
                            'value': elm.rebatRate,
                            'disabled': 'disabled'
                        }))
                    )
                );
            });
            rangeSlider();

            if (suId[suId.length - 1] == '6672') {
                $('#profit-setting .range-slider').addClass('hidden');
            } else {
                $('#profit-setting .range-slider-range').prop('disabled', false);
                $('#profit-setting .setting-content').append($('<div />', {
                    'class': 'mx-4 py-3'
                }).append($('<button />', {
                    'class': 'btn-submit',
                    'type': 'button',
                    'onclick': 'updateProfitInfo();'
                }).html('提交')));
            }
        }

        function updateRefundList(data) {
            $('#bonus-group-setting .setting-content').empty();
            data.forEach(function(elm, idx) {
                $('#bonus-group-setting .setting-content').append(
                    $('<div />', {
                        'class': 'form-group row m-0 py-2'
                    })
                    .append($('<span />', {
                        'class': 'col-7 text-left'
                    }).html(elm.spName))
                    .append($('<span />', {
                        'class': 'col-5 text-right range-slider-value'
                    }).html(elm.multipleMax))
                    .append($('<div />', {
                            'class': 'range-slider text-center'
                        })
                        .append($('<input />', {
                            'type': 'hidden',
                            'name': 'spid',
                            'value': elm.spID
                        }))
                        .append((elm.multipleMax == elm.multipleMin) ? $('<input />', {
                            'class': 'range-slider-range disabled',
                            'type': 'range',
                            'step': 2,
                            'max': elm.multipleMax,
                            'min': elm.multipleMin - 2,
                            'value': elm.multipleMax,
                            'disabled': 'disabled'
                        }) : $('<input />', {
                            'class': 'range-slider-range',
                            'type': 'range',
                            'step': 2,
                            'max': elm.multipleMax,
                            'min': elm.multipleMin,
                            'value': elm.multiple,
                            'disabled': 'disabled'
                        }))
                    )
                );
            });
            rangeSlider();

            if (suId[suId.length - 1] == '6672') {
                $('#bonus-group-setting .range-slider').addClass('hidden');
            } else {
                $('#bonus-group-setting .range-slider-range').prop('disabled', false);
                $('#bonus-group-setting .setting-content').append($('<div />', {
                    'class': 'mx-4 py-3'
                }).append($('<button />', {
                    'class': 'btn-submit',
                    'type': 'button',
                    'onclick': 'updateRefundInfo();'
                }).html('提交')));
            }
        }

        function backSuperior() {
            root.pop();
            suId.pop();

            getJsonData("/t7m/T7Member/SubordinateList", {
                'suId': suId[suId.length - 1]
            }, updateTable, null, true);
            if (root[root.length - 1] == 'test23') {
                $('#backSuperior').attr('onclick', '');
                $('.add-btn').show();
            }
        }

        function getSubordinateList(loginId, memberId) {
            if (loginId == 'test23') {
                $('#backSuperior').attr('onclick', '');
                $('.add-btn').show();
                $('#link-registration-tab').show();
                $('#link-management-tab').show();
            } else {
                $('#backSuperior').attr('onclick', 'backSuperior();');
                $('.add-btn').hide();
                $('#link-registration-tab').hide();
                $('#link-management-tab').hide();
            }

            root.push(loginId);
            suId.push(memberId);
            getJsonData("/t7m/T7Member/SubordinateList", {
                'suId': memberId
            }, updateTable, null, true);
        }

        function getProfitList() {
            getJsonData("/t7m/T7Member/ProfitList", {
                'suId': suId[suId.length - 1]
            }, function(response) {
                if (response.result) {
                    profitList = JSON.parse(response.data);
                    updateProfitList(profitList[suId[suId.length - 1]]);
                }
            }, null, true);
        }

        function getRefundList() {
            getJsonData("/t7m/T7Member/RefundList", {
                'suId': suId[suId.length - 1]
            }, function(response) {
                if (response.result) {
                    refundList = JSON.parse(response.data);
                    updateRefundList(refundList[suId[suId.length - 1]]);
                }
            }, null, true);
        }

        function showAddMember(isAgent) {
            $('#setting-form div.tkgz_list span').show();
            $('#setting-form div.icheck-list').show();
            if (isAgent) {
                $($('#setting-form div.icheck-list')[1]).find('input').prop('checked', true);
                $($('#setting-form div.icheck-list')[0]).hide();
                $($('#setting-form div.tkgz_list span')[0]).hide();
                $($('#setting-form div.tkgz_list span')[1]).html('开户类别');
                if ('2' === '1') {
                    $($('#setting-form div.icheck-list')[2]).hide();
                    $($('#setting-form div.tkgz_list span')[2]).hide();
                }
            } else {
                $($('#setting-form div.icheck-list')[0]).find('input').prop('checked', true);
                $($('#setting-form div.icheck-list')[1]).hide();
                $($('#setting-form div.icheck-list')[2]).hide();
                $($('#setting-form div.tkgz_list span')[1]).hide();
                $($('#setting-form div.tkgz_list span')[2]).hide();
            }
            resizeSubmitForm();
            openElement('.sub-page');
        }

        function submitForm() {
            var data = {};
            data['memberType'] = $('.sub-page input[name=memberType]:checked').val();
            data['childLoginId'] = $('.sub-page input[name=childLoginId]').val();
            data['childLoginPw'] = $('.sub-page input[name=childLoginPw]').val();

            var arr = [];
            $('.sub-page .refund').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['Multiple'] = $(this).val();
                arr.push(tmp);
            });
            data['refundInfo'] = JSON.stringify(arr);

            arr = [];
            $('.sub-page .profit').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['RebatRateEdit'] = $(this).val();
                arr.push(tmp);
            });
            data['profitInfo'] = JSON.stringify(arr);
            getJsonData("/t7m/T7Member/CreateChildAccount", data, checkResult, null, true);
        }

        function updateProfitInfo() {
            var data = {};
            var arr = [];
            var memberId = suId[suId.length - 1];
            $('#profit-setting .setting-content').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['memberID'] = memberId;
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['rebatRateEdit'] = $(this).val();
                arr.push(tmp);
            });
            data['mainInfo'] = JSON.stringify(arr);

            getJsonData("/t7m/T7Member/UpdateProfitInfo", data, function(response) {
                if (response.result) {
                    showSuccessResult(response.message);
                    var data = JSON.parse(response.data);
                    updateProfitList(data[suId[suId.length - 1]]);
                } else {
                    showErrorResult(response.message);
                }
            }, null, true);
        }

        function updateRefundInfo() {
            var data = {};
            var arr = [];
            var memberId = suId[suId.length - 1];
            $('#bonus-group-setting .setting-content').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['memberID'] = memberId;
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['multiple'] = $(this).val();
                arr.push(tmp);
            });
            data['mainInfo'] = JSON.stringify(arr);

            getJsonData("/t7m/T7Member/UpdateRefundInfo", data, function(response) {
                if (response.result) {
                    showSuccessResult(response.message);
                    var data = JSON.parse(response.data);
                    updateRefundList(data[suId[suId.length - 1]]);
                } else {
                    showErrorResult(response.message);
                }
            }, null, true);
        }

        function checkResult(response) {
            if (response.result) {
                showSuccessResult(response.message, refresh);
            } else {
                showErrorResult(response.message);
            }
        }

        function resizeSubmitForm() {
            var h = $('.sub-page').outerHeight() - $('.sub-page header').outerHeight() - $('#setting-form').outerHeight();
            $('.setting-form .tkgz_tab').css({
                'height': h,
                'overflow-y': 'auto'
            });
        }

        function createUrl() {
            var data = {};
            data['memberType'] = $('#link-registration input[name=memberType]:checked').val();

            var arr = [];
            $('#link-registration .refund').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['Multiple'] = $(this).val();
                arr.push(tmp);
            });
            data['refundInfo'] = JSON.stringify(arr);

            arr = [];
            $('#link-registration .profit').find('input.range-slider-range').each(function() {
                var tmp = {};
                tmp['SPID'] = $(this).prev('input[name=spid]').val();
                tmp['RebatRateEdit'] = $(this).val();
                arr.push(tmp);
            });
            data['profitInfo'] = JSON.stringify(arr);
            getJsonData("/t7m/T7Member/CreateUrl", data, function(response) {
                if (response.result) {
                    var data = JSON.parse(response.data);
                    showQrCode(data.url);
                    getUrlList();
                } else {
                    showErrorResult(response.message);
                }
            }, null, true);
        }

        var clipboard;

        function showQrCode(url) {
            if (!url.startsWith('http')) url = 'http:' + url;
            $('#qrCode').empty();
            $('#copy-link').val(url);
            new QRCode(document.getElementById("qrCode"), {
                text: 'http:' + url,
                width: 128,
                height: 128,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            if (clipboard) clipboard.destroy();
            layer.open({
                type: 1,
                title: '二维码',
                area: '80vw;',
                shade: 0.8,
                id: 'qr_code_layer',
                content: $('#qrCodeInfo'),
                success: function(layero, index) {
                    clipboard = new ClipboardJS('#copy-link-btn', {
                        container: document.getElementById('layui-layer1')
                    });
                    clipboard.on('success', function(e) {
                        layer.msg('链接已复制');
                        e.clearSelection();
                    });
                }
            });
        }

        function showLinkUpdate(id, status) {
            $('#linkInfoForm input[name=uid]').val(id);
            $($('#linkInfoForm input[name=status]')[status]).prop('checked', true);
            layer.open({
                type: 1,
                title: '修改链接',
                area: '80vw;',
                shade: 0.8,
                id: 'link_info_layer',
                btn: ['确认'],
                btnAlign: 'c',
                content: $('#linkInfo'),
                yes: function(index, layero) {
                    getJsonData("/t7m/T7Member/UpdateUrl", $('#linkInfoForm').serialize(), function(response) {
                        if (response.result) {
                            var data = JSON.parse(response.data);
                            $('#' + data[0].id).find('.link-status').html(linkStatusText[data[0].status]);
                            $('#' + data[0].id).find('button').attr('onclick', 'showLinkUpdate("' + data[0].id + '",' + data[0].status + ');');
                            layer.closeAll();
                        }
                    }, null, true);
                }
            });
        }

        var linkStatusText = ["停用", "正常"];

        function getUrlList() {
            getJsonData("/t7m/T7Member/UrlList", null, function(response) {
                var data = JSON.parse(response.data);
                data.forEach(function(elm, idx) {
                    $('#link-management').append($('<div />', {
                            'class': 'artive ctjl_list mb-3',
                            'id': elm.id
                        })
                        .append($('<h4 />', {
                            'class': 'p-2'
                        }).append('&nbsp;').append($('<span />')
                            .append($('<button />', {
                                'type': 'button',
                                'class': 'mr-1',
                                'onclick': 'showQrCode("' + elm.url + '");'
                            }).html('二维码'))
                            .append($('<button />', {
                                'type': 'button',
                                'class': 'modify-btn',
                                'onclick': 'showLinkUpdate("' + elm.id + '", ' + elm.status + ');'
                            }).html('修改'))
                        ))
                        .append($('<div />', {
                                'class': 'p-2'
                            })
                            .append($('<p />', {
                                'class': 'justify-content-between'
                            }).append($('<span />').html('编号')).append($('<label />').html('状态')))
                            .append($('<p />', {
                                'class': 'justify-content-between'
                            }).append($('<span />').append($('<em />').html(elm.id))).append($('<label />').append((elm.status == 1) ? linkStatusText[elm.status] : $('<em />', {
                                'class': 'link-status'
                            }).html(linkStatusText[elm.status]))))
                        )
                    );
                });
            });
        }

        function showTransferInfo(id) {
            $('#transferForm input[name=memberId]').val(id);
            layer.open({
                type: 1,
                title: '转帐下级',
                area: '80vw;',
                shade: 0.8,
                id: 'transfer_info_layer',
                btn: ['提交'],
                btnAlign: 'c',
                content: $('#transferInfo'),
                yes: function(index, layero) {
                    $("#transferForm").submit();
                }
            });
        }

        $(document).ready(function() {
            initialize();
            getSubordinateList('test23', '6672');
            getChildSettings();
            getUrlList();
        });
    </script>
</body>
</html>